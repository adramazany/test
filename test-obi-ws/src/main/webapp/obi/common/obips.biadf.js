if(typeof(biadf)=="undefined"){biadf=function(){};biadf.ActionType=function(){};biadf.ActionType.kMainActionType="MainActionType";biadf.ActionType.kURLActionType="URLActionType";biadf.ActionType.kDashboardChangePage="DashboardChangePage";biadf.ActionType.kDashboardReportLink="DashboardReportLink";biadf.ActionType.kDashboardOpenLinkItem="DashboardOpenLinkItem";biadf.ActionType.kADFContextualEvent="ADFContextualEvent";biadf.ActionType.kADFNavToBiEvent="ADFNavToBiEvent";biadf.g_sMainActionType=biadf.ActionType.kMainActionType;biadf.TargetType=function(){};biadf.TargetType.kUnknown="unknown";biadf.TargetType.kBIReport="report";biadf.TargetType.kBIDashboard="dashboard";biadf.TargetType.kBIDashboardPage="page";biadf.TargetType.kURL="url";biadf.TargetType.kOrigianlBIAdfContextualEvent="contextualEvent";biadf.ContentType=function(){};biadf.ContentType.kDashboardContent="DashboardContent";biadf.ContentType.kReportContent="ReportContent";biadf.saveViewStateToMDS=function(b,a,c){};biadf.getResultDivChildById=function(a,b){var c=document.getElementById(a+"ADFResults");if(c==null){return document.getElementById(b)}return biadf.getResultChildById(c,b)};biadf.getResultChildById=function(d,c){var a=d.childNodes;for(var b=0;b<a.length;b++){if(a.item(b).id==c){return a.item(b)}}};biadf.getXmlHttpReq=function(){var a=null;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a};biadf.getDefaultContextualEventFilter=function(){return(biadf.aDefaultContextualEventFilters?biadf.aDefaultContextualEventFilters:{bAll:true})};biadf.sawUtils=function(){};biadf.sawUtils.encodeURIComponent=encodeURIComponent;biadf.sawUtils.decodeURIComponent=decodeURIComponent;biadf.sawUtils.findFormInputElement=function(b,c){for(var a=0;a<b.elements.length;a++){if(b.elements[a].name==c){return b.elements[a]}}return null};biadf.sawUtils.createInput=function(c,e,d,b){if(!b){b=document}var a=b.createElement("INPUT");a.setAttribute("name",c);a.setAttribute("type",d);if(e){a.value=e}else{a.value=""}return a};biadf.sawUtils.addInput=function(b,d,f,e,c){var a=biadf.sawUtils.findFormInputElement(b,d);if(a==null){a=biadf.sawUtils.createInput(d,f,e,c)}if(f){a.value=f}else{a.value=""}b.appendChild(a)};biadf.sawUtils.addHiddenInput=function(a,c,d,b){biadf.sawUtils.addInput(a,c,d,"hidden",b)};biadf.sawUtils.addSessionSecurityCodeInput=function(a){biadf.sawUtils.addHiddenInput(a,"_scid",window.obips_scid)};biadf.sawUtils.getCommandToURLBeforeADFRedirection=function(e){var d=saw.commandToURL("");var e=saw.commandToURL(e);var c="&RedirectURL=";var a=d.indexOf(c);if(a>=0){if(e.indexOf(d)==0){var b=e.substr(a+c.length);b=biadf.sawUtils.decodeURIComponent(b);e=b}}return e};biadf.sawUtils.trimViewPathInStatePath=function(b){var c=b;var a=b.indexOf("~v:");if(a>=0){c=b.substr(0,a)}return c};biadf.DashboardHandler=function(b,a){this.id=b;this.parentdivid=a;this.iframe=biadf.getResultDivChildById(a,a+"_"+b+"_iframe");if(this.iframe==null){this.iframe=biadf.getResultDivChildById(a,b+"_iframe")}if(this.iframe){this.iframe.handler=this}this.updated=false;this.init=true;this.aContextualEventFilter=biadf.getDefaultContextualEventFilter();this.currentURL=null};biadf.DashboardHandler.prototype=new function(){};biadf.DashboardHandler.prototype.linkToAdfContainer=function(){this.adfbiObjJSON=biadf.findAndAssignBIAdfObj("d:dashboard");if(this.adfbiObjJSON){if(this.adfbiObjJSON.adfbiObj){saw.log.debug("good this.adfbiObjJSON.adfbiObj");this.adfbiObjJSON.adfbiObj.handler=this}else{saw.log.debug("no adfbiObjJSON.adfbiObj")}}else{saw.log.debug("no adfbiObjJSON")}};biadf.DashboardHandler.prototype.onIFrameLoad=function(){var a=this.initNoSubmit();if(this.init){this.init=false;var b=this.formInit;b.submit()}else{this.handleReInit(a)}};biadf.DashboardHandler.prototype.initNoSubmit=function(){var f=biadf.getResultDivChildById(this.parentdivid,this.id+"_init");if(f==null){this.init=false}if(this.init){var h=biadf.getResultChildById(f,this.id+"_bridgePath");var g=biadf.getResultChildById(f,this.id+"_promptsExpr");var i=this.getContextualEventFilterFromADFContainerInitDiv(f,this.id);if(i){this.aContextualEventFilter=i}else{this.aContextualEventFilter=biadf.getDefaultContextualEventFilter()}var c=biadf.TargetType.kBIDashboard;var l=this.id+"_initForm";var d=g.innerHTML;var b=h.value;var e=biadf.getResultDivChildById(this.parentdivid,this.id+"_vx");var j=e.value;var a=true;var k=document.createElement("form");k=this.prepareInitForm(k,c,l,d,b,j,null,a);f.appendChild(k);this.formInit=k;this.recordInitialURL(k)}return f};biadf.DashboardHandler.prototype.prepareInitForm=function(j,k,m,s,l,e,h,f){if(m!=null&&m!=""){j.id=m}j.method="post";j.target=this.iframe.name;var b=l;var i=s;if(i!=null&&i!=""&&i!='<!-- <?xml version="1.0"?>\n -->'){var d="action%3Dnavigate";var c=b.indexOf("RedirectURL",0);if(c>-1){var n=b.indexOf("&",c);var o=null;if(n>-1){o=b.substring(c,n)}else{o=b.substring(c,b.length)}if(o!=null){var p=o.toLowerCase().indexOf("%3f",0);if(p==-1){d="%3f"+d}else{d="%26"+d}if(n<=-1){b+=d}else{var t=b.substring(0,n);var r=b.substring(n,b.length);b=t+d+r}}}}j.action=b;var g="<!-- ";var q=" -->";if(i.indexOf(g)==0){i=i.substring(g.length)}if(i.indexOf(q)!=-1){i=i.substring(0,i.length-q.length)}var a='<?xml version="1.0"?>';if(i.indexOf(a)==0){i=i.substring(a.length)}i=i.replace(/(^\s*)|(\s*$)/g,"");biadf.sawUtils.addHiddenInput(j,"P0",i);biadf.sawUtils.addHiddenInput(j,"ADFSelectionsXML",(e?e:""));biadf.sawUtils.addHiddenInput(j,"ClientStateXml",(h?h:""));biadf.sawUtils.addHiddenInput(j,"firstTimeLoad",(f?"true":""));return j};biadf.DashboardHandler.prototype.handleReInit=function(b){if(typeof(this.iframe.contentWindow.obips)=="undefined"){return}var d=this.iframe;var a=this.iframe.parentNode;var c=false;while(a&&a.nodeName!="BODY"){if(a.tagName=="DIV"&&a.id!=null&&a.id.indexOf("biadftskflowgl")!=-1){c=true;break}d=a;a=a.parentNode}if(c&&d){d.style.height="100%"}var e=this.iframe.contentWindow.obips.views.ViewController.getController("d:dashboard").getClientStateManager();if(typeof(e)!="undefined"&&e!=null){e.initClientStateManagerForADF(this)}return};biadf.DashboardHandler.prototype.recordInitialURL=function(b){var a=b.action+"";if(b.inputP0){a+="&P0="+biadf.sawUtils.encodeURIComponent(b.inputP0.value)}if(b.inputViewState){a+="&ADFSelectionsXML="+biadf.sawUtils.encodeURIComponent(b.inputViewState.value)}if(b.firstTimeLoad){a+="&firstTimeLoad="+biadf.sawUtils.encodeURIComponent(b.firstTimeLoad.value)}this.updateCurrentWindowURL(a)};biadf.DashboardHandler.prototype.updateCurrentWindowURL=function(a){this.currentURL=a};biadf.DashboardHandler.prototype.getCurrentWindowURL=function(a){return this.currentURL};biadf.DashboardHandler.prototype.getContextualEventFilterFromADFContainerInitDiv=function(b,a){var e=biadf.getResultChildById(b,this.id+"_contextualEventFilters");var d=null;var c=(e?e.innerHTML+"":"");if(c&&c!=""){d=saw.json.parse(c,true,false)}return d};biadf.DashboardHandler.prototype.saveViewStateToADF=biadf.saveViewStateToMDS;biadf.DashboardHandler.onIFrameLoad=function(c,a){var b=biadf.DashboardHandler.getHandler(c,a);b.onIFrameLoad()};biadf.DashboardHandler.getHandler=function(d,a){var c=biadf.getResultDivChildById(a,a+"_"+d+"_iframe");if(c==null){c=biadf.getResultDivChildById(a,d+"_iframe")}if(c!=null&&c.handler!=null){return c.handler}else{var b=new biadf.DashboardHandler(d,a);return b}};biadf.DashboardHandler.prototype.addBIAdfNavToBiEventListener=function(a){if(typeof(biadf.addBIAdfNavToBiEventListener)=="function"){return biadf.addBIAdfNavToBiEventListener(this,a)}return false};biadf.DashboardHandler.prototype.handleBIAdfNavToBIEvent=function(a){if(typeof(biadf.gotoNewPageOnDashboardContent)=="function"){return biadf.gotoNewPageOnDashboardContent(this,a)}return false};biadf.DashboardHandler.getBridgePathForDrillAction=function(e,h,d,c){var b=null;if(c==biadf.TargetType.kBIReport){var i=false;if(i){b=biadf.sawUtils.getCommandToURLBeforeADFRedirection("ReloadAnalysis")}else{b=biadf.sawUtils.getCommandToURLBeforeADFRedirection("PortalGo")}var f=biadf.sawUtils.trimViewPathInStatePath(h.statePath+"");var a=f;var g=d.portalPath+"";var j=d.page+"";b+="&PortalPath="+saw.encodeURIComponent(g);b+="&Page="+saw.encodeURIComponent(j);b+="&ViewID="+saw.encodeURIComponent(f);if(!i){b+="&ReloadTargets="+saw.encodeURIComponent(a)}}return b};biadf.DashboardHandler.getBridgePathForNavigateAction=function(c,e,b,d){var a=null;if(d==biadf.TargetType.kBIReport){a=biadf.sawUtils.getCommandToURLBeforeADFRedirection("PortalGo");a+="&Path="+saw.encodeURIComponent(e.targetPath);if(e.targetItem){a+="&ViewName="+saw.encodeURIComponent(e.targetItem)}if(b.portalPath){a+="&PortalPath="+saw.encodeURIComponent(b.portalPath)}if(b.page){a+="&Page="+saw.encodeURIComponent(b.page)}}else{if(d==biadf.TargetType.kBIDashboard){a=biadf.sawUtils.getCommandToURLBeforeADFRedirection("SyndicatePages");a+="&PortalPath="+saw.encodeURIComponent(e.targetPath);if(e.targetItem){a+="&Page="+saw.encodeURIComponent(e.targetItem)}}else{if(d==biadf.TargetType.kBIDashboardPage){a=biadf.sawUtils.getCommandToURLBeforeADFRedirection("SyndicatePages");a+="&PortalPath="+saw.encodeURIComponent(e.targetPath);a+="&Page="+saw.encodeURIComponent(e.targetItem)}else{if(d==biadf.TargetType.kURL){a=e.targetPath}}}}return a};biadf.DashboardHandler.getBridgePathForMiscAction=function(c,e,b,d){var a=null;if(e.actionType==biadf.ActionType.kMainActionType){if(e.targetType==biadf.TargetType.kBIReport||e.targetType==biadf.TargetType.kBIDashboard||e.targetType==biadf.TargetType.kBIDashboardPage||e.targetType==biadf.TargetType.kURL){a=biadf.DashboardHandler.getBridgePathForNavigateAction(c,e,b,d)}else{if(e.targetType==biadf.TargetType.kUnknown){}else{if(e.targetType==biadf.TargetType.kOrigianlBIAdfContextualEvent){}}}}else{}return a};biadf.DashboardHandler.getTargetBridgePath=function(c,d,b){var a=null;switch(d.actionType){case biadf.ActionType.kMainActionType:switch(d.action){case"drill":a=biadf.DashboardHandler.getBridgePathForDrillAction(c,d,b,d.targetType);break;case"navigate":case"chartnavigate":a=biadf.DashboardHandler.getBridgePathForNavigateAction(c,d,b,d.targetType);break;default:a=biadf.DashboardHandler.getBridgePathForMiscAction(c,d,b,d.targetType);break}break;case biadf.ActionType.kURLActionType:a=biadf.DashboardHandler.getBridgePathForNavigateAction(c,d,b,biadf.TargetType.kURL);break;case biadf.ActionType.kDashboardChangePage:if(d.targetType==biadf.TargetType.kBIDashboard||d.targetType==biadf.TargetType.kBIDashboardPage){a=biadf.sawUtils.getCommandToURLBeforeADFRedirection("SyndicatePages");a+="&PortalPath="+saw.encodeURIComponent(d.targetPath);a+="&Page="+saw.encodeURIComponent(d.targetItem);a+="&DoNotHidePageTabs=true"}break;case biadf.ActionType.kDashboardReportLink:if(d.targetType==biadf.TargetType.kBIReport){a=biadf.DashboardHandler.getBridgePathForNavigateAction(c,d,b,d.targetType)}break;case biadf.ActionType.kDashboardOpenLinkItem:a=biadf.DashboardHandler.getBridgePathForNavigateAction(c,d,b,d.targetType);break;case biadf.ActionType.kADFContextualEvent:case biadf.ActionType.kADFNavToBiEvent:a=biadf.DashboardHandler.getBridgePathForNavigateAction(c,d,b,d.targetType);break;default:a=biadf.DashboardHandler.getBridgePathForMiscAction(c,d,b,d.targetType);break}return a};biadf.getTargetBridgePath=function(b,c,a){if(b.sContentType==biadf.ContentType.kDashboardContent){return biadf.DashboardHandler.getTargetBridgePath(b,c,a)}else{if(b.sContentType==biadf.ContentType.kReportContent){return saw.ondemandload.EmbededReport.getTargetBridgePath(b,c,a)}}return null};biadf.findAndAssignBIAdfObj=function(k){var a=null;var s=null;var q=null;var c=null;var d=null;if(window.frameElement){d=biadf.ContentType.kDashboardContent;a=window.frameElement.parentNode;if(typeof(window.parent.AdfPage)=="undefined"){return null}q=window.parent.AdfPage.PAGE;if(typeof(window.frameElement.handler)!="undefined"){c=window.frameElement.handler}}else{d=biadf.ContentType.kReportContent;var g=["~g:","~r:"];var n="";for(var r=0;r<g.length;r++){var e=k.lastIndexOf(g[r]);if(e>=0){var f=k.substring(e+g[r].length);e=f.indexOf("~");if(e>=0){n=f.substring(0,e)}else{n=f}break}}a=document.getElementById(n+"ADFResults");s=document.getElementById(n);if(typeof(AdfPage)=="undefined"){return null}q=AdfPage.PAGE;if(s){c=s.tEmeddedReportObj}}if(a==null){return null}var l=a.getAttribute("bindingid");var h=a.parentElement;if(h==null){return null}var u=h.parentElement;try{while(u&&u.tagName!="FORM"){u=u.parentElement}}catch(o){var m=0;var j=0}var t=q.findComponentByAbsoluteId(h.id);var b=q.findComponentByAbsoluteId(u.id);t._parent=b;var p=(s?s.tEmeddedReportObj:null);return{adfbiObj:t,adfformObj:b,contentdiv:h,biReportDiv:a,sBindingID:l,sContentType:d,adfform:u,biEmbeddedReportDiv:s,tEmeddedReportObj:p,tObipsHandlerObj:c}};biadf.issueBIAdfContextualEvent=function(c,b){var d=biadf.findAndAssignBIAdfObj(c);if(!d&&!d.adfbiObj){return false}var a=null;if(window.frameElement){a=new window.parent.BIAdfContextualEvent(d.adfbiObj,escape(b))}else{a=new BIAdfContextualEvent(d.adfbiObj,escape(b))}a.queue(true);return true};biadf.issueBIAdfGetRptXmlContextualEventCurrentRef=function(b,c){var a=b.getSavedSelectionsXmlForADF();return biadf.issueBIAdfGetRptXmlContextualEvent(a,c)};biadf.createJSONDefForBIAdfNavToBIEvent_ForBIAdfGetRptXmlCE=function(c,b,d,a){var e=biadf.createJSONDefForBIAdfNavToBIEventCommon(c,b,d,a);return biadf.populateSpecialParamsFromViewConstrollerArgs_NavToBiEvent(c,e)};biadf.createJSONDefForBIAdfNavToBIEvent=function(c,b,d,a){return biadf.createJSONDefForBIAdfNavToBIEventCommon(c,b,d,a)};biadf.createNavExprValueFromQDR=function(d,n){var l=obips.XMLDOM.parseXML(n);if(l){var k=new obiaf.ExecuteAction("");var c=new Array();k.paramsEditorModel=new obids.ParametersEditor.Model(c);k.paramsEditorModel.showValueTypes=false;k.parseExecuteActionXML(l);var j=new Array();var a=new Array();for(var f=0;f<k.paramsEditorModel.ParameterDocuments.length;++f){var b=k.paramsEditorModel.ParameterDocuments[f];j[b.name]=b.getFirstValue();var h=new Object();var e=b.doesFirstValueHaveDisplayValue();if(e){h.codeValue=true}else{h.codeValue=false}a[b.name]=h}if(this.bNavOpenNewWindowOption){j.bNavOpenNewWindowOption=k.bNavOpenNewWindowOption}var g=k.createNavInfoExecuteNavigateToBIFromAnswersAction(j,a);var m=createNavQDRExprFromNavInfo(g,0);return saw.getXmlText(m.tExpr)}return""};biadf.createJSONDefForBIAdfNavToBIEventCommon=function(l,o,d,p){var e=l.getSavedSelectionsXmlForADF();var m=obips.XMLDOM.selectSingleNode(d,".//saw:assign[@name='__navigateToBIContent__']/saw:value",saw.delivers.namespaceMap);var a=m?XUIGetElementText(m):"";var h=a+"";var f=null;var b=obiaf.ActionsBase.getActionLinkURLProperties(h);var g=biadf.TargetType.kUnknown;var i=null;switch(b.eType){case"report":g=biadf.TargetType.kBIReport;break;case"dashboard":g=biadf.TargetType.kBIDashboard;break;case"page":g=biadf.TargetType.kBIDashboard;h=b.sPortalPath;f=b.sPortalPage;break;default:g=biadf.TargetType.kUnknown;break}var c=o.viewModel.getReportXML();var n=(c?saw.xml.getXMLString(c):null);var k={targetView:o.actionExecuter.actionLinkViewStatePath,actionType:"ADFNavToBiEvent",targetType:g,targetPath:h};if(f){k.targetItem=f}k.reportStatePath=o.viewModel.getReportStatePath();k.viewID=o.viewModel.getViewID();k.reportXML=n;k.stateXmlStr=e;k.params={sQDRString:o.getQdrString(),actionXml:p};var j=biadf.createNavExprValueFromQDR(k.params.sQDRString,k.params.actionXml);k.params.sNavExprContext=j+"";return k};biadf.issueBIAdfNavToBIEvent=function(b,e){var c=biadf.findAndAssignBIAdfObj(b);if(!c&&!c.adfbiObj){return false}var d=saw.json.toString(e,true);var a=null;if(window.frameElement){a=new window.parent.BIAdfNavToBIEvent(c.adfbiObj,d)}else{a=new BIAdfNavToBIEvent(c.adfbiObj,d)}if(c.tObipsHandlerObj){c.tObipsHandlerObj.addBIAdfNavToBiEventListener(a)}a.queue(true);return true};biadf.createJSONDefFromViewControllerArgs=function(g,d,c,h){var f={targetType:biadf.TargetType.kUnknown,params:{}};var a=null;for(var e in d){var j=e+"";switch(j.toLowerCase()){case"clientstatexml":case"viewstate":break;case"action":f.action=d[e].toLowerCase();f.actionType=biadf.g_sMainActionType;break;case"viewname":f.viewName=d[e];f.params[e]=d[e];break;case"viewpos":f.viewPos=d[e];f.params[e]=d[e];break;case"viewid":f.targetView=d[e];f.params[e]=d[e];break;case"navfromviewid":a=d[e];f.params[e]=d[e];break;case"portalpath":f.portalPath=d[e];break;case"page":f.page=d[e];break;case"path":f.path=d[e];break;case"view":f.view=d[e];default:f.params[e]=d[e];break}}if((typeof(f.targetView)=="undefined"||f.targetView=="")&&a!=null){f.targetView=a}var b=false;if(typeof(c)!="undefined"&&c!=null){f.sCommand=c;b=true}f=biadf.populateSpecialParamsFromViewConstrollerArgs(g,f,b,h);return f};biadf.getReportNameFromCS=function(c,d){var b=null;var a=biadf.sawUtils.trimViewPathInStatePath(d);if(a&&a!=""){var e=c.getStateValue(a,"localizedCaption");if(e&&e!=""){b=e}else{b=c.getStateValue(a,"itemName")}}return b};biadf.populateSpecialParamsFromViewConstrollerArgs=function(c,g,d,f){g.inplaceAction=(f?true:false);if(typeof(g.action)!="undefined"){var e=false;if(d){switch(g.sCommand.toLowerCase()){case"portalgo":case"go":e=true;break;case"dashboard":case"reloaddashboard":case"syndicatepages":e=false;break;case"ajaxgo":case"reloadanalysis":e=true;break;default:break}}switch(g.action.toLowerCase()){case"navigate":case"chartnavigate":if(g.path){g.targetType=biadf.TargetType.kBIReport;g.itemName=saw.getItemName(g.path+"")}else{if(g.portalPath&&g.page){g.targetType=biadf.TargetType.kBIDashboardPage;g.itemName=g.page}else{if(g.portalPath){g.targetType=biadf.TargetType.kBIDashboard;g.itemName=saw.getItemName(g.portalPath+"")}}}break;case"drill":if(e){g.targetType=biadf.TargetType.kBIReport}else{if(typeof(f)!="undefined"&&f){if(g.portalPath){g.targetType=biadf.TargetType.kBIDashboard}else{g.targetType=biadf.TargetType.kBIReport}}else{if(g.portalPath){g.targetType=biadf.TargetType.kBIDashboard}else{g.targetType=biadf.TargetType.kBIReport}}}if(g.targetType==biadf.TargetType.kBIDashboard){var a=g.params.DashboardCaption;if(typeof(a)!="undefined"&&a!=null){g.itemName=a+""}}else{if(g.targetType==biadf.TargetType.kBIReport){if(g.targetView){var b=biadf.getReportNameFromCS(c,g.targetView+"");if(b){g.itemName=b}}}}break;default:if(g.path){g.targetType=biadf.TargetType.kBIReport;g.itemName=saw.getItemName(g.path+"")}else{if(g.portalPath&&g.page){g.targetType=biadf.TargetType.kBIDashboardPage;g.itemName=g.page}else{if(g.portalPath){g.targetType=biadf.TargetType.kBIDashboard;var a=g.params.DashboardCaption;if(typeof(a)!="undefined"&&a!=null){g.itemName=a+""}}}}break}if(e){if(typeof(g.viewPos)!="undefined"&&g.viewPos!=null){g.itemName=g.viewPos+""}else{if(typeof(g.viewName)!="undefined"&&g.viewName!=null){g.itemName=g.viewName}else{if(g.itemName){}else{if(g.targetView){var b=biadf.getReportNameFromCS(c,g.targetView+"");if(b){g.itemName=b}}}}}}}return g};biadf.populateSpecialParamsFromViewConstrollerArgs_NavToBiEvent=function(b,c){if(c.targetType==biadf.TargetType.kBIReport){if(typeof(c.targetItem)!="undefined"&&c.targetItem!=null){c.itemName=c.targetItem+""}else{if(typeof(c.targetPath)!="undefined"&&c.targetPath!=null){c.itemName=saw.getItemName(c.targetPath+"")}else{if(c.itemName){}else{if(c.targetView){var a=biadf.getReportNameFromCS(b,c.targetView+"");if(a){c.itemName=a}}}}}if(c.targetPath){c.path=c.targetPath}if(c.targetItem){c.viewName=c.targetItem}}else{if(c.targetType==biadf.TargetType.kBIDashboard){c.itemName=saw.getItemName(c.targetPath+"");c.portalPath=c.targetPath;if(c.targetItem){c.page=c.targetItem}}else{if(c.targetType==biadf.TargetType.kBIDashboardPage){c.itemName=saw.getItemName(c.targetItem+"");c.portalPath=c.targetPath;c.page=c.targetItem}}}return c};biadf.handleViewControllerPreSubmit=function(b,c,d,e){var f=biadf.createJSONDefFromViewControllerArgs(b,c,d,e);var a=biadf.issueBIAdfGetRptXmlContextualEventCurrentRef(b,f);if(typeof(biadf.processADFSimulateModeViewControllerArgs)=="function"){biadf.processADFSimulateModeViewControllerArgs(b,c,a)}};biadf.initTestContent=function(a){if(typeof(biadf.TestUtils)!="undefined"){biadf.TestUtils.initContent(a)}};biadf.matchContextualEventFilterRule=function(a,c){var b=((typeof(c.actionType)=="undefined")?biadf.g_sMainActionType:c.actionType+"").toLowerCase();if(b==biadf.g_sMainActionType.toLowerCase()){if(typeof(a.action)!="undefined"&&(a.action+"").toLowerCase()==(c.action+"").toLowerCase()){return true}}else{if(typeof(a.actionType)!="undefined"&&(a.actionType+"").toLowerCase()==b){return true}}return false};biadf.shouldFireContextualEvent=function(c,d){var a={bAll:true};if(c.tEmeddedReportObj&&c.tEmeddedReportObj.aContextualEventFilter){a=c.tEmeddedReportObj.aContextualEventFilter}else{a=biadf.getDefaultContextualEventFilter()}if(a){if(a.bAll){return true}else{if(a.aRules&&a.aRules.length>0){for(var b=0;b<a.aRules.length;b++){if(biadf.matchContextualEventFilterRule(a.aRules[b],d)){return true}}}}}return false};biadf.createBIAdfGetRptXmlContextualEvent=function(d,b,h){var c=d.adfbiObj;var g={actionType:(h.actionType?h.actionType:biadf.g_sMainActionType),action:(h.action?h.action:""),stateXmlStr:b,statePath:(h.targetView?h.targetView:""),targetType:h.targetType,inplaceAction:(h.inplaceAction?true:false)};switch(h.targetType){case biadf.TargetType.kBIReport:if(h.targetPath&&h.actionType==biadf.ActionType.kADFNavToBiEvent){g.targetPath=h.targetPath}else{if(h.path){g.targetPath=h.path}}if(h.targetItem&&h.actionType==biadf.ActionType.kADFNavToBiEvent){g.targetItem=h.targetItem}else{if(h.view){g.targetItem=h.view}}break;case biadf.TargetType.kBIDashboard:if(h.targetPath&&h.actionType==biadf.ActionType.kADFNavToBiEvent){g.targetPath=h.targetPath}else{g.targetPath=h.portalPath}if(h.targetItem&&h.actionType==biadf.ActionType.kADFNavToBiEvent){g.targetItem=h.targetItem}else{if(h.page){g.targetItem=h.page}}break;case biadf.TargetType.kBIDashboardPage:if(h.targetPath&&h.actionType==biadf.ActionType.kADFNavToBiEvent){g.targetPath=h.targetPath}else{g.targetPath=h.portalPath}if(h.targetItem&&h.actionType==biadf.ActionType.kADFNavToBiEvent){g.targetItem=h.targetItem}else{g.targetItem=h.page}break;case biadf.TargetType.kURL:g.targetPath=h.path;break;case biadf.TargetType.kOrigianlBIAdfContextualEvent:case biadf.TargetType.kUnknown:default:if(h.path){g.targetPath=h.path;if(h.view){g.targetItem=h.view}}else{if(h.portalPath){g.targetPath=h.portalPath}if(h.page){g.targetItem=h.page}}break}g.sNextBridgePath=biadf.getTargetBridgePath(d,g,h);if(typeof(h.itemName)!="undefined"){g.biContentName=h.itemName+""}else{g.biContentName=h.targetView}var e=saw.json.toString(g,true);var a=null;var f="Fired BIAdfGetRptXmlContextualEvent, JSON = "+e;saw.log.debug(f);if(window.frameElement){a=new window.parent.BIAdfGetRptXmlContextualEvent(c,e)}else{a=new BIAdfGetRptXmlContextualEvent(c,e)}return a};biadf.issueBIAdfGetRptXmlContextualEvent=function(i,g){var e=false;var c=(typeof(biadf.bUsePersistedState)!="undefined"&&biadf.bUsePersistedState?true:false);var b=(typeof(biadf.bUseStateXML)!="undefined"&&biadf.bUseStateXML?true:false);try{var h=biadf.findAndAssignBIAdfObj(g.targetView);if(!h||!h.adfbiObj||!biadf.shouldFireContextualEvent(h,g)){e=false;var d="Skipped BIAdfGetRptXmlContextualEvent, actionType: "+g.actionType+" action: "+g.action+"  statePath:"+g.targetView+"  \r\nstate:\r\n"+i+" \r\n\r\n***json: \r\n"+saw.json.toString(g,true);saw.log.debug(d)}else{var f=biadf.createBIAdfGetRptXmlContextualEvent(h,i,g);f.queue(true);e=true}}catch(a){e=false}var j={bFiredEvent:e,bUsePersistedState:c,bUseADFStateXMLAsClientXML:b,sStateXmlStr:i};return j}};